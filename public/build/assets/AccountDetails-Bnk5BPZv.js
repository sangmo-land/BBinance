import{r as v,u as W,j as e,L as K}from"./app-B7T6_7p4.js";import{A as me}from"./AppLayout-alfEtcPg.js";import{S as he}from"./SEOHead-DMhNF2Fc.js";import{M as E}from"./Modal-0fSts4O4.js";import"./transition-CBeSVAqy.js";import"./dialog-BUYQuuTp.js";function o(a,L=8){const n=Number(a);return(Number.isFinite(n)?n:0).toLocaleString("en-US",{minimumFractionDigits:L,maximumFractionDigits:L})}const T={BTC:"Bitcoin",ETH:"Ethereum",USDT:"Tether US",BNB:"BNB",USDC:"USDC",USD:"US Dollar",EUR:"Euro"};function ve({account:a,cryptoAccount:L,rates:n,cryptoConversionFeePercent:_=1,transactions:R=[],recipientAccounts:P=[]}){const u=a.account_type==="fiat",[h,Q]=v.useState(()=>{if(u)return"fiat";if(typeof window<"u"){const r=new URLSearchParams(window.location.search).get("tab");if(r&&["spot","funding","earn"].includes(r))return r}return"spot"}),[A,X]=v.useState(u?"USD":"BTC"),[$,b]=v.useState(!1),[Z,w]=v.useState(!1),[ee,N]=v.useState(!1),[te,k]=v.useState(!1),[F,C]=v.useState("menu"),{data:z,setData:I,post:re,processing:O,errors:S,reset:se}=W({currency:"USD",amount:""}),ae=t=>{t.preventDefault(),k(!1),re(route("accounts.deposit",a.id),{onSuccess:()=>{se()},onError:()=>{k(!0)}})},{data:c,setData:g,post:le,processing:q,errors:m,reset:ne}=W({currency:"USD",amount:"",destination_type:"external",destination_account:"",bank_details:"",description:""}),oe=t=>{t.preventDefault(),N(!1),le(route("accounts.withdraw",a.id),{onSuccess:()=>{ne()},onError:()=>{N(!0)}})},{data:d,setData:U,post:ie,processing:G,errors:M,reset:ce}=W({currency:"USD",amount:"",direction:"available_to_withdrawable"}),de=t=>{t.preventDefault(),w(!1),ie(route("accounts.transfer-internal",a.id),{onSuccess:()=>{ce()},onError:()=>{w(!0)}})},{data:s,setData:p,post:Y,processing:B,errors:f,reset:V,clearErrors:xe}=W({from_currency:"EUR",to_currency:"USD",amount:""});v.useEffect(()=>{if(!$){const t=setTimeout(()=>{C("menu"),V(),xe()},300);return()=>clearTimeout(t)}},[$]);const J=(t,r)=>{const l=Number(r)||0;return t==="USD"?l:!n||!n[t]?0:l*n[t]},D=(a.balances||[]).filter(t=>u?t.wallet_type==="fiat":t.wallet_type===h).reduce((t,r)=>t+J(r.currency,r.balance),0),ue=A==="USD"?D:D/(n[A]||1);return Object.keys(T).filter(t=>["USD","EUR","GBP"].indexOf(t)===-1),e.jsxs(me,{children:[e.jsx(he,{title:`Account Details - ${a.account_number}`,description:"View detailed account information and wallet balances."}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6 md:p-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:u?"Fiat Account":"Crypto Wallets"}),e.jsxs("p",{className:"text-lg text-gray-500 font-medium mt-1",children:[a.currency," Account •"," ",e.jsx("span",{className:"text-gray-400",children:a.account_number})]})]}),e.jsxs(K,{href:"/dashboard",className:"group flex items-center gap-2 px-5 py-2.5 bg-white border border-gray-200 text-gray-600 font-bold rounded-xl hover:bg-gray-50 hover:text-blue-600 hover:border-blue-200 transition-all shadow-sm hover:shadow active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Dashboard"]})]}),e.jsxs("div",{className:"bg-white rounded-xl mb-8",children:[u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 p-6 md:p-8 bg-gradient-to-br from-indigo-600 to-blue-700 rounded-3xl shadow-xl text-white relative overflow-hidden ring-4 ring-indigo-50 border border-indigo-500/10 active:scale-[0.99] transition-transform duration-200",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-72 h-72 rounded-full bg-blue-500/30 blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 left-0 -ml-20 -mb-20 w-56 h-56 rounded-full bg-indigo-500/30 blur-3xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-400/30 rounded-lg backdrop-blur-sm border border-white/10 shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-blue-100 font-bold text-xs uppercase tracking-[0.2em] drop-shadow-sm",children:"Total Fiat Value"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-baseline gap-2 group",children:[e.jsx("span",{className:"text-5xl md:text-6xl font-black tracking-tighter drop-shadow-xl group-hover:scale-105 transition-transform duration-300",children:o(D,2)}),e.jsx("span",{className:"text-xl font-bold text-blue-200",children:"USD"})]}),e.jsxs("div",{className:"mt-4 inline-flex items-center gap-3 px-4 py-2 rounded-xl bg-white/10 backdrop-blur-md border border-white/10 shadow-inner hover:bg-white/20 transition-all duration-300 cursor-default",children:[e.jsx("span",{className:"text-2xl text-blue-300 font-light",children:"≈"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["€",o(D*(n?.EUR||.92),2)]}),e.jsx("span",{className:"text-xs font-bold text-blue-200 uppercase",children:"EUR"})]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"p-5 bg-white/10 rounded-2xl backdrop-blur-sm border border-white/10 flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white mb-2 shadow-lg ring-2 ring-white/20",children:e.jsx("span",{className:"font-bold text-lg",children:(a.user?.name||"U").split(" ").map(t=>t[0]).join("").substring(0,2).toUpperCase()})}),e.jsx("p",{className:"text-white font-bold text-lg tracking-wide drop-shadow-md mb-0.5",children:a.user?.name}),e.jsx("p",{className:"text-blue-200 text-xs font-bold uppercase tracking-wider",children:a.account_number})]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:["available","pending","locked","withdrawable"].map(t=>{const r=H=>a.balances?.find(j=>j.wallet_type==="fiat"&&j.currency===H&&j.balance_type===t)?.balance||0,l=r("USD"),i=r("EUR"),x={available:"border-green-500",pending:"border-yellow-500",locked:"border-red-500",withdrawable:"border-blue-500"}[t]||"border-gray-200",y={available:"text-green-500 bg-green-50",pending:"text-yellow-500 bg-yellow-50",locked:"text-red-500 bg-red-50",withdrawable:"text-blue-500 bg-blue-50"}[t]||"text-gray-500 bg-gray-50";return e.jsxs("div",{className:`bg-white p-5 rounded-2xl shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 border-l-4 ${x}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${y}`,children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t==="available"&&e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}),t==="pending"&&e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}),t==="locked"&&e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}),t==="withdrawable"&&e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]})}),e.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:t})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-baseline group",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:"USD"}),e.jsx("span",{className:"text-xl font-black text-gray-800 tracking-tight",children:o(l,2)})]}),e.jsxs("div",{className:"flex justify-between items-baseline group",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:"EUR"}),e.jsx("span",{className:"text-xl font-black text-gray-800 tracking-tight",children:o(i,2)})]})]})]},t)})})]}):e.jsxs("div",{className:"p-8 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl text-white shadow-2xl relative overflow-hidden border border-gray-700",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500/10 rounded-full blur-3xl -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-blue-500/10 rounded-full blur-3xl -ml-16 -mb-16"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 opacity-80",children:[e.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:e.jsx("svg",{className:"w-6 h-6 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest text-gray-300",children:"Total Estimated Balance"}),e.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-black bg-white/10 text-white uppercase",children:[h," Wallet"]})]}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-end gap-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx("span",{className:"text-5xl font-black tracking-tight text-white mb-2",children:o(ue,8)}),e.jsxs("div",{className:"relative group",children:[e.jsx("select",{value:A,onChange:t=>X(t.target.value),className:"appearance-none bg-white/10 border border-white/10 text-amber-400 font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-white/20 transition-colors focus:ring-2 focus:ring-amber-500/50 focus:outline-none",children:Object.keys(T).map(t=>e.jsx("option",{value:t,className:"text-gray-900",children:t},t))}),e.jsx("svg",{className:"w-4 h-4 text-amber-400 absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsx("p",{className:"text-gray-400 font-medium flex items-center gap-2",children:e.jsxs("span",{children:["≈ $",o(D,2)," ","USD"]})})]})})]})]}),u&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8 pt-8 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>k(!0),className:"group relative overflow-hidden bg-gray-900 text-white p-4 rounded-2xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 text-left",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 -mr-4 -mt-4 bg-white/10 rounded-full blur-xl w-24 h-24"}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between gap-3",children:[e.jsx("div",{className:"p-2 bg-white/10 w-fit rounded-lg backdrop-blur-sm",children:e.jsx("svg",{className:"w-6 h-6 text-amber-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-black text-lg",children:"Deposit"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Add funds"})]})]})]}),e.jsx("button",{onClick:()=>N(!0),className:"group bg-white text-gray-900 border border-gray-200 p-4 rounded-2xl shadow-sm hover:shadow-lg hover:-translate-y-1 hover:border-gray-300 transition-all duration-300 text-left",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 w-fit rounded-lg group-hover:bg-gray-200 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-black text-lg",children:"Withdraw"}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Cash out"})]})]})}),e.jsx("button",{onClick:()=>b(!0),className:"group bg-white text-gray-900 border border-gray-200 p-4 rounded-2xl shadow-sm hover:shadow-lg hover:-translate-y-1 hover:border-gray-300 transition-all duration-300 text-left",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 w-fit rounded-lg group-hover:bg-purple-100 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-black text-lg",children:"Convert"}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Exchange"})]})]})}),e.jsx("button",{onClick:()=>w(!0),className:"group bg-white text-gray-900 border border-gray-200 p-4 rounded-2xl shadow-sm hover:shadow-lg hover:-translate-y-1 hover:border-gray-300 transition-all duration-300 text-left",children:e.jsxs("div",{className:"flex flex-col h-full justify-between gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 w-fit rounded-lg group-hover:bg-blue-100 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-black text-lg",children:"Transfer"}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Internal"})]})]})})]})]}),!u&&e.jsx("div",{className:"mb-8",children:e.jsx("nav",{className:"flex p-1.5 space-x-2 bg-gray-100 rounded-2xl",children:["spot","funding","earning"].map(t=>e.jsxs("button",{onClick:()=>Q(t),className:`
                                                w-full py-3 text-sm font-black rounded-xl leading-5 uppercase tracking-wide
                                                flex items-center justify-center gap-2
                                                transition-all duration-300 ease-out
                                                ${h===t?"bg-white text-blue-600 shadow-lg ring-1 ring-blue-500/10 transform scale-100":"text-gray-500 hover:text-gray-900 hover:bg-white/60"}
                                            `,children:[t==="spot"&&e.jsx("svg",{className:`w-5 h-5 ${h===t?"text-blue-500":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),t==="funding"&&e.jsx("svg",{className:`w-5 h-5 ${h===t?"text-blue-500":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),t==="earning"&&e.jsx("svg",{className:`w-5 h-5 ${h===t?"text-blue-500":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:[t," Wallet"]})]},t))})}),e.jsxs("div",{className:"space-y-4",children:[(a.balances||[]).filter(t=>t.wallet_type===h&&(!t.balance_type||t.balance_type==="available")).map((t,r)=>{const l=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-xl bg-gradient-to-br from-indigo-50 to-blue-50 text-indigo-600 font-black text-sm ring-1 ring-gray-100 group-hover:from-blue-500 group-hover:to-indigo-600 group-hover:text-white transition-all duration-300",children:t.currency.substring(0,3)}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-3 h-3 rounded-full border-2 border-white"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-black text-gray-900",children:t.currency}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-gray-100 text-gray-500 uppercase tracking-wide group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors",children:"Available"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-500 group-hover:text-blue-500 transition-colors",children:T[t.currency]||t.currency})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-mono font-black text-gray-900 tracking-tight",children:o(t.balance,8)}),e.jsx("div",{className:"text-xs font-bold text-gray-400 group-hover:text-blue-500 transition-colors",children:t.currency==="USD"?n?.EUR?`≈ €${o(t.balance/n.EUR,2)} EUR`:`≈ €${o(t.balance*.92,2)} EUR`:`≈ $${o(J(t.currency,t.balance),2)} USD`})]})]})});return u?e.jsx("div",{className:"group block bg-white rounded-2xl p-5 border border-gray-100 shadow-sm transition-all duration-300 hover:shadow-xl hover:border-blue-200 transform hover:-translate-y-1",children:e.jsx(l,{})},`${t.currency}-${r}`):e.jsx(K,{href:route("accounts.crypto-detail",[a.id,t.currency])+`?wallet=${h}`,className:"group block bg-white rounded-2xl p-5 border border-gray-100 shadow-sm hover:shadow-xl hover:border-blue-200 transition-all duration-300 transform hover:-translate-y-1",children:e.jsx(l,{})},`${t.currency}-${r}`)}),(a.balances||[]).filter(t=>t.wallet_type===h&&(!t.balance_type||t.balance_type==="available")).length===0&&e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"bg-white p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 shadow-sm",children:e.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No assets found in this wallet."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Deposit funds to get started."})]})]}),u&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Recent Transactions"}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Converted To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R&&R.length>0?R.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize
                                                                    ${t.type==="deposit"?"bg-green-100 text-green-800":""}
                                                                    ${t.type==="withdrawal"?"bg-red-100 text-red-800":""}
                                                                    ${t.type==="conversion"?"bg-blue-100 text-blue-800":""}
                                                                    ${t.type==="transfer"?"bg-purple-100 text-purple-800":""}
                                                                `,children:t.type})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:[o(t.amount,2)," ",t.from_currency||t.to_currency]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.converted_amount?`${o(t.converted_amount,8)} ${t.to_currency}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                                                                    ${t.status==="completed"?"bg-green-100 text-green-800":t.status==="failed"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}
                                                                `,children:t.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(t.created_at).toLocaleDateString()," ",new Date(t.created_at).toLocaleTimeString()]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-10 text-center text-gray-500",children:"No transactions found."})})})]})})})]})]})})}),e.jsxs(E,{show:$,onClose:()=>b(!1),children:[F==="menu"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Select Conversion Type"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-500",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("button",{onClick:()=>C("fiat"),className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-xl hover:border-blue-500 hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-lg group-hover:bg-blue-100 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Fiat Conversion"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Convert between USD and EUR"})]})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("button",{onClick:()=>{C("crypto"),p({...s,from_currency:"USD",to_currency:"USDT",amount:""})},className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-xl hover:border-purple-500 hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 text-purple-600 rounded-lg group-hover:bg-purple-100 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Convert to Crypto"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Buy crypto using your fiat balance"})]})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),F==="fiat"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Fiat Conversion"}),e.jsxs("button",{onClick:()=>C("menu"),className:"text-sm font-bold text-gray-500 hover:text-gray-800 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),b(!1),Y(`/accounts/${a.id}/convert-fiat`,{onSuccess:()=>{V()},onError:()=>b(!0)})},children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl mb-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"From Account"}),e.jsxs("p",{className:"text-xs font-bold text-gray-500",children:["Available:"," ",o(a.balances?.find(t=>t.currency===s.from_currency&&t.wallet_type==="fiat")?.balance||0,2)," ",s.from_currency]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:t=>p("amount",t.target.value),className:"w-full text-2xl font-black bg-transparent border-0 focus:ring-0 p-0 text-gray-900 placeholder-gray-300 pr-12",placeholder:"0.00",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>{const t=a.balances?.find(r=>r.currency===s.from_currency&&r.wallet_type==="fiat")?.balance||0;p("amount",t)},className:"absolute right-0 top-1/2 -translate-y-1/2 text-sm font-bold text-blue-600 hover:text-blue-700 uppercase",children:"Max"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("select",{value:s.from_currency,onChange:t=>{const r=t.target.value;p({...s,from_currency:r,to_currency:r==="USD"?"EUR":"USD"})},className:"font-bold text-lg bg-white border border-gray-200 rounded-lg focus:border-blue-500 focus:ring-0 cursor-pointer shadow-sm",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})})]})]}),e.jsx("div",{className:"flex justify-center -my-9 relative z-10 pointer-events-none",children:e.jsx("button",{type:"button",onClick:()=>p({...s,from_currency:s.to_currency,to_currency:s.from_currency}),className:"p-2 bg-white border border-gray-200 rounded-full shadow-md text-gray-500 hover:text-blue-600 pointer-events-auto transition-transform hover:rotate-180",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl mb-6 border border-gray-200 mt-4",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"To Account (Estimate)"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"flex-1 text-2xl font-black text-gray-900",children:(()=>{const t=Number(s.amount)||0;if(t===0)return"0.00";const r=n&&n[s.from_currency]?n[s.from_currency]:0,l=n&&n[s.to_currency]?n[s.to_currency]:1,i=t*r/l;return o(i,2)})()}),e.jsx("div",{className:"text-lg font-bold text-gray-500",children:s.to_currency})]})]}),f.amount&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:f.amount}),f.error&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:f.error}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 px-4 py-3 font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:B,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-200 transition-all disabled:opacity-50 disabled:shadow-none",children:B?"Converting...":"Convert Now"})]})]})]}),F==="crypto"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Convert to Crypto"}),e.jsxs("button",{onClick:()=>C("menu"),className:"text-sm font-bold text-gray-500 hover:text-gray-800 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[(()=>{const t=n?.[s.from_currency]||0,l=(n?.[s.to_currency]||1)/(t||1);return e.jsxs("p",{className:"text-sm font-bold text-red-600 bg-red-50 px-3 py-1 rounded-lg border border-red-100",children:["Platform Rate: 1 ",s.to_currency," ≈"," ",o(l,2)," ",s.from_currency]})})(),e.jsxs("span",{className:"text-xs font-bold text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["Fee: ",_,"%"]})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),b(!1),Y(`/accounts/${a.id}/convert-to-crypto`,{onSuccess:()=>{V()},onError:()=>b(!0)})},children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl mb-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"From (Fiat)"}),e.jsxs("p",{className:"text-xs font-bold text-gray-500",children:["Available:"," ",o(a.balances?.find(t=>t.currency===s.from_currency&&t.wallet_type==="fiat")?.balance||0,2)," ",s.from_currency]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:t=>p("amount",t.target.value),className:"w-full text-2xl font-black bg-transparent border-0 focus:ring-0 p-0 text-black placeholder-gray-400 pr-12",placeholder:"Enter amount",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>{const t=a.balances?.find(r=>r.currency===s.from_currency&&r.wallet_type==="fiat")?.balance||0;p("amount",t)},className:"absolute right-0 top-1/2 -translate-y-1/2 text-sm font-bold text-blue-600 hover:text-blue-700 uppercase",children:"Max"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("select",{value:s.from_currency,onChange:t=>p("from_currency",t.target.value),className:"font-bold text-lg bg-white border border-gray-200 rounded-lg focus:border-blue-500 focus:ring-0 cursor-pointer shadow-sm",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})})]}),(()=>{const t=a.balances?.find(r=>r.currency===s.from_currency&&r.wallet_type==="fiat")?.balance||0;return Number(s.amount)>Number(t)?e.jsx("p",{className:"text-red-500 text-xs font-bold mt-2",children:"Insufficient balance for this transaction."}):null})()]}),e.jsx("div",{className:"flex justify-center -my-9 relative z-10 pointer-events-none",children:e.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded-full shadow-md text-gray-500",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl mb-6 border border-gray-200 mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider",children:"To (Spot Wallet)"}),e.jsx("div",{className:"text-right",children:(()=>{const t=Number(s.amount)||0,r=n?.[s.from_currency]||0,l=n?.[s.to_currency]||1,i=1-_/100,x=t>0?t*i*r/l:0,y=L?.balances?.find(j=>j.currency===s.to_currency&&j.wallet_type==="spot"&&(!j.balance_type||j.balance_type==="available"))?.balance||0,H=Number(y)+x;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs font-bold text-gray-500",children:["After:"," ",o(H,8)," ",s.to_currency]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Before:"," ",o(y,8)," ",s.to_currency]})]})})()})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"flex-1 text-2xl font-black text-gray-900 truncate",children:(()=>{const t=Number(s.amount)||0;if(t===0)return"0.00000000";const r=n&&n[s.from_currency]?n[s.from_currency]:0,l=n&&n[s.to_currency]?n[s.to_currency]:1,i=1-_/100,x=t*i*r/l;return o(x,8)})()}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("select",{value:s.to_currency,onChange:t=>p("to_currency",t.target.value),className:"font-bold text-lg bg-white border border-gray-200 rounded-lg focus:border-purple-500 focus:ring-0 cursor-pointer shadow-sm w-32",children:[e.jsx("option",{value:"USDT",children:"USDT"}),Object.keys(T).filter(t=>["USD","EUR","GBP","USDT"].indexOf(t)===-1).map(t=>e.jsx("option",{value:t,children:t},t))]})})]}),e.jsx("div",{className:"text-right mt-1",children:e.jsxs("span",{className:"text-xs text-gray-400",children:["Fee:"," ",o(Number(s.amount||0)*(_/100),2)," ",s.from_currency]})})]}),f.amount&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:f.amount}),f.error&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:f.error}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 px-4 py-3 font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Cancel"}),(()=>{const t=a.balances?.find(i=>i.currency===s.from_currency&&i.wallet_type==="fiat")?.balance||0,r=Number(s.amount)||0,l=B||r<=0||r>t;return e.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-xl shadow-lg shadow-purple-200 transition-all disabled:opacity-50 disabled:shadow-none flex items-center justify-center gap-2",children:B?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Buy Crypto"})})()]})]})]})]}),e.jsx(E,{show:Z,onClose:()=>w(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Transfer Funds"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:de,children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"From"}),e.jsx("div",{className:"font-bold text-gray-900 text-lg",children:d.direction==="available_to_withdrawable"?"Available":"Withdrawable"})]}),e.jsx("button",{type:"button",onClick:()=>U("direction",d.direction==="available_to_withdrawable"?"withdrawable_to_available":"available_to_withdrawable"),className:"p-2 bg-white rounded-full border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors text-blue-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"To"}),e.jsx("div",{className:"font-bold text-gray-900 text-lg",children:d.direction==="available_to_withdrawable"?"Withdrawable":"Available"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Asset & Amount"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-1/3",children:e.jsxs("select",{value:d.currency,onChange:t=>U("currency",t.target.value),className:"w-full text-lg font-bold border-gray-300 rounded-xl focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:d.amount,onChange:t=>U("amount",t.target.value),className:"w-full text-lg font-bold border-gray-300 rounded-xl focus:border-blue-500 focus:ring-blue-500 pr-20"}),e.jsx("button",{type:"button",onClick:()=>{const t=d.direction==="available_to_withdrawable"?"available":"withdrawable",r=a.balances?.find(l=>l.wallet_type==="fiat"&&l.currency===d.currency&&l.balance_type===t)?.balance||0;U("amount",r)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-bold text-blue-600 uppercase hover:text-blue-700",children:"Max"})]})]}),e.jsxs("div",{className:"mt-2 text-right text-xs text-gray-500 font-medium",children:["Available:"," ",(()=>{const t=d.direction==="available_to_withdrawable"?"available":"withdrawable",r=a.balances?.find(l=>l.wallet_type==="fiat"&&l.currency===d.currency&&l.balance_type===t)?.balance||0;return o(r,2)+" "+d.currency})()]})]}),M.amount&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:M.amount}),M.error&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:M.error}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 px-4 py-3 font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Cancel"}),(()=>{const t=d.direction==="available_to_withdrawable"?"available":"withdrawable",r=a.balances?.find(y=>y.wallet_type==="fiat"&&y.currency===d.currency&&y.balance_type===t),l=Number(r?.balance||0),i=Number(d.amount),x=i<=0||i>l||G;return e.jsx("button",{type:"submit",disabled:x,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-200 transition-all disabled:opacity-50 disabled:shadow-none flex items-center justify-center gap-2",children:G?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Confirm Transfer"})})()]})]})]})}),e.jsx(E,{show:ee,onClose:()=>N(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Withdraw Funds"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:oe,children:[e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-100 mb-6 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-yellow-800 text-sm",children:"Withdrawable Balance Only"}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:'You can only withdraw funds that are in your "Withdrawable" balance. If your funds are in "Available", please transfer them first.'})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Destination"}),e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-xl",children:[e.jsx("button",{type:"button",onClick:()=>g("destination_type","external"),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${c.destination_type==="external"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"External (Bank)"}),e.jsx("button",{type:"button",onClick:()=>g("destination_type","internal"),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${c.destination_type==="internal"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Internal Transfer"})]})]}),c.destination_type==="internal"?e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Recipient Account"}),e.jsxs("select",{required:!0,value:c.destination_account,onChange:t=>g("destination_account",t.target.value),className:"w-full text-base border-gray-300 rounded-xl focus:border-red-500 focus:ring-red-500",children:[e.jsx("option",{value:"",children:"Select Recipient Account"}),P&&P.map(t=>e.jsxs("option",{value:t.account_number,children:[t.user.name," (",t.account_number,")"]},t.id))]}),m.destination_account&&e.jsx("p",{className:"text-red-500 text-sm font-medium mt-1",children:m.destination_account})]}):e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Bank Details / Instructions"}),e.jsx("textarea",{rows:3,required:!0,placeholder:"Enter bank name, IBAN, SWIFT, etc.",value:c.bank_details,onChange:t=>g("bank_details",t.target.value),className:"w-full text-base border-gray-300 rounded-xl focus:border-red-500 focus:ring-red-500"}),m.bank_details&&e.jsx("p",{className:"text-red-500 text-sm font-medium mt-1",children:m.bank_details})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Description (Ref)"}),e.jsx("input",{type:"text",placeholder:"Transfer reference...",value:c.description,onChange:t=>g("description",t.target.value),className:"w-full text-base border-gray-300 rounded-xl focus:border-red-500 focus:ring-red-500"}),m.description&&e.jsx("p",{className:"text-red-500 text-sm font-medium mt-1",children:m.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Withdraw Asset"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-1/3",children:e.jsxs("select",{value:c.currency,onChange:t=>g("currency",t.target.value),className:"w-full text-lg font-bold border-gray-300 rounded-xl focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:c.amount,onChange:t=>g("amount",t.target.value),className:"w-full text-lg font-bold border-gray-300 rounded-xl focus:border-blue-500 focus:ring-blue-500 pr-20"}),e.jsx("button",{type:"button",onClick:()=>{const t=a.balances?.find(r=>r.wallet_type==="fiat"&&r.currency===c.currency&&r.balance_type==="withdrawable")?.balance||0;g("amount",t)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-bold text-blue-600 uppercase hover:text-blue-700",children:"Max"})]})]}),e.jsxs("div",{className:"mt-2 text-right text-xs text-gray-500 font-medium",children:["Withdrawable:"," ",(()=>{const t=a.balances?.find(r=>r.wallet_type==="fiat"&&r.currency===c.currency&&r.balance_type==="withdrawable")?.balance||0;return o(t,2)+" "+c.currency})()]})]}),m.amount&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:m.amount}),m.error&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:m.error}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 px-4 py-3 font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Cancel"}),(()=>{const t=a.balances?.find(x=>x.wallet_type==="fiat"&&x.currency===c.currency&&x.balance_type==="withdrawable"),r=Number(t?.balance||0),l=Number(c.amount),i=l<=0||l>r||q;return e.jsx("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl shadow-lg shadow-red-200 transition-all disabled:opacity-50 disabled:shadow-none flex items-center justify-center gap-2",children:q?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Confirm Withdrawal"})})()]})]})]})}),e.jsx(E,{show:te,onClose:()=>k(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Deposit Funds"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:ae,children:[u&&a.user&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 mb-4",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Account Name"}),e.jsx("div",{className:"font-bold text-gray-900 text-lg",children:a.user.name})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 mb-6",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"IBAN (Account Number)"}),e.jsx("div",{className:"font-mono font-bold text-gray-900 text-lg",children:a.account_number}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Funds will be deposited to this account."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Currency & Amount"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-1/3",children:e.jsxs("select",{value:z.currency,onChange:t=>I("currency",t.target.value),className:"w-full text-lg font-bold border-gray-300 rounded-xl focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",step:"0.01",min:"1",value:z.amount,onChange:t=>I("amount",t.target.value),className:"w-full text-lg font-bold border-gray-300 rounded-xl focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00",autoFocus:!0})})]})]}),S.amount&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:S.amount}),S.error&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-4",children:S.error}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>k(!1),className:"flex-1 px-4 py-3 font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:O||!z.amount,className:"flex-1 px-4 py-3 bg-gray-900 hover:bg-gray-800 text-white font-bold rounded-xl shadow-lg transition-all disabled:opacity-50 disabled:shadow-none flex items-center justify-center gap-2",children:O?"Processing...":"Confirm Deposit"})]})]})]})})]})}export{ve as default};
