import{a as v,j as e,L as c}from"./app-kYbqEjaf.js";import{A as w,S as _}from"./SEOHead-lKmV8mcn.js";function x(t){const a=Number(t);return Number.isFinite(a)?a:0}function l(t,a=2){return x(t).toLocaleString("en-US",{minimumFractionDigits:a,maximumFractionDigits:a})}function A(t){if(!t)return"";const a=new Date(t);return Number.isFinite(a.getTime())?a.toLocaleString():String(t)}function D({accounts:t,transactions:a,isAdmin:r,stats:n}){const{auth:o}=v().props,i=Array.isArray(t)?t:t?.data??[],d=Array.isArray(t)?null:t?.links,m=n?.totalBalance?.usd??0,h=n?.totalBalance?.eur??0,g=n?.totalBalance?.btc??0,b={"@context":"https://schema.org","@type":"FinancialProduct",name:"BBinance Dashboard",description:"Account overview, balances, and recent transfers."};return e.jsxs(w,{children:[e.jsx(_,{title:r?"Admin Dashboard | BBinance":"Dashboard | BBinance",description:"View your accounts, balances, and recent transfers in BBinance.",keywords:"dashboard, accounts, balances, transfers",structuredData:b}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4 mb-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-indigo-100 text-indigo-700 text-xs font-semibold mb-3",children:r?"✓ Admin Overview":"✓ Account Overview"}),e.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Dashboard"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Welcome back",o?.user?.name?`, ${o.user.name}`:"",". Here’s what’s happening across your accounts."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{href:"/transfer",className:"px-5 py-3 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-md hover:shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all",children:"New transfer"}),r&&e.jsx(c,{href:"/admin",className:"px-5 py-3 text-sm font-semibold text-gray-700 bg-white rounded-xl border border-gray-200 hover:bg-gray-50 transition-colors",children:"Admin panel"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5 mb-10",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-6 md:col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total balance (USD)"}),e.jsxs("p",{className:"mt-2 text-4xl font-black text-gray-900",children:["$",l(m,2)]}),e.jsxs("div",{className:"mt-3 flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["€",l(h,2)]}),e.jsxs("span",{children:[l(g,8)," BTC"]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Accounts"}),e.jsx("p",{className:"mt-2 text-4xl font-black text-gray-900",children:n?.accountCount??i.length}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Active accounts in view"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Recent activity"}),e.jsx("p",{className:"mt-2 text-4xl font-black text-gray-900",children:n?.recentTransactionCount??a?.length??0}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Last 5 transactions"})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Accounts"}),d&&e.jsx("p",{className:"text-sm text-gray-500",children:"Showing paginated results"})]}),i.length===0?e.jsx("div",{className:"bg-white rounded-3xl border border-gray-100 p-8 text-gray-600",children:"No accounts found."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:i.map(s=>e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500",children:s.account_type??"Account"}),e.jsx("p",{className:"mt-1 text-lg font-bold text-gray-900",children:s.account_number}),r&&s.user?.name&&e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Owner: ",e.jsx("span",{className:"font-semibold text-gray-900",children:s.user.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500",children:"Balance"}),e.jsxs("p",{className:"mt-1 text-2xl font-black text-gray-900",children:[l(s.balance,2),e.jsx("span",{className:"text-sm font-semibold text-gray-600 ml-2",children:s.currency})]})]})]}),e.jsxs("div",{className:"mt-5 flex items-center justify-between",children:[e.jsx("span",{className:`text-xs font-semibold px-2.5 py-1 rounded-full ${s.is_active?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700"}`,children:s.is_active?"Active":"Inactive"}),e.jsx(c,{href:`/transfer?from_account=${s.id}`,className:"text-sm font-semibold text-indigo-700 hover:text-indigo-800",children:"Transfer →"})]})]},s.id))}),d&&e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:d.map(s=>e.jsx(c,{href:s.url||"",className:`px-3 py-2 text-sm rounded-lg border transition-colors ${s.active?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"} ${s.url?"":"opacity-50 pointer-events-none"}`,dangerouslySetInnerHTML:{__html:s.label}},s.url??s.label))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Recent transactions"}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"p-4",children:"Reference"}),e.jsx("th",{className:"p-4",children:"From"}),e.jsx("th",{className:"p-4",children:"To"}),e.jsx("th",{className:"p-4",children:"Amount"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"Date"})]})}),e.jsx("tbody",{children:(a??[]).length===0?e.jsx("tr",{children:e.jsx("td",{className:"p-6 text-gray-600",colSpan:6,children:"No recent transactions."})}):(a??[]).map(s=>{const u=s.from_account||s.fromAccount,p=s.to_account||s.toAccount,j=u?.account_number??(s.from_account_id?`#${s.from_account_id}`:"—"),f=p?.account_number??(s.to_account_id?`#${s.to_account_id}`:"—"),y=x(s.amount),N=s.from_currency||s.to_currency||"USD";return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-4 font-semibold text-gray-900",children:s.reference_number??`TX#${s.id}`}),e.jsx("td",{className:"p-4 text-gray-700",children:j}),e.jsx("td",{className:"p-4 text-gray-700",children:f}),e.jsxs("td",{className:"p-4 text-gray-900 font-semibold",children:[l(y,2)," ",N]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`text-xs font-semibold px-2.5 py-1 rounded-full ${s.status==="completed"?"bg-emerald-100 text-emerald-700":s.status==="failed"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:s.status??"unknown"})}),e.jsx("td",{className:"p-4 text-gray-600",children:A(s.created_at)})]},s.id)})})]})})})]})]})]})}export{D as default};
